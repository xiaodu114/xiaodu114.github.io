<!DOCTYPE html>
<html lang="zh-cmn-Hans">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />
        <title>Python - xiaodu114.github.io</title>
        <meta name="keywords" content="Python,pip,venv,Poetry" />
        <meta name="description" content="之前管理 Python 的种种都分散到各篇笔记中了，这里整理汇集一下 Python 相关的东东，例如：Python 的安装、pip 和 venv 的安装和使用、Poetry 的安装等" />

        <script src="/p/_/js/main.js"></script>
    </head>

    <body>
        <!-- github访问地址：/p/python/index.html -->
        <div class="blog-page">
            <h1>Python</h1>
            <ul>
                <li>
                    <a href="https://www.python.org/" target="_blank" rel="noopener noreferrer">Welcome to Python.org</a>
                </li>
                <li>
                    <a href="https://docs.python.org/3" target="_blank" rel="noopener noreferrer">Python 3.x Documentation</a>
                </li>
            </ul>
            <h2>环境准备</h2>
            <p>开始搞项目之前先把他需要的一些常见的环境都弄好，例如：python、pip、venv、Poetry 等</p>
            <h3>Python</h3>
            <p>这里说一下在不同的操作系统下如何安装<line-code>Python</line-code></p>
            <h4>Ubuntu 22.04</h4>
            <p><line-code>Ubuntu 22.04</line-code>已经默认安装了<line-code>Python</line-code>，这里的版本是：3.10.12</p>
            <pre ddz-class="here-need-to-handle-by-highlight" ddz-lang="bash">
#   检查版本
python3 -V
            </pre>
            <h3>pip</h3>
            <ul>
                <li>
                    <a href="https://github.com/pypa/pip" target="_blank" rel="noopener noreferrer">GitHub - pypa/pip: The Python package installer</a>
                </li>
                <li>
                    <a href="https://pip.pypa.io/" target="_blank" rel="noopener noreferrer">pip documentation</a>
                </li>
                <li>
                    <a href="https://pypi.org/" target="_blank" rel="noopener noreferrer">PyPI · The Python Package Index</a>
                </li>
            </ul>
            <h4>Ubuntu 22.04</h4>
            <pre ddz-class="here-need-to-handle-by-highlight" ddz-lang="bash">
#   检查 pip 版本：pip -V
sudo apt install python3-pip
            </pre>
            <h5>设置清华镜像源</h5>
            <p>参考地址：<a href="https://mirrors.tuna.tsinghua.edu.cn/help/pypi/" target="_blank" rel="noopener noreferrer"> pypi | 镜像站使用帮助 | 清华大学开源软件镜像站 | Tsinghua Open Source Mirror</a></p>
            <pre ddz-class="here-need-to-handle-by-highlight" ddz-lang="bash">
#   临时使用清华镜像来升级 pip
python3 -m pip install -i https://pypi.tuna.tsinghua.edu.cn/simple --upgrade pip
#   全局设置
pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple
            </pre>
            <h3>venv</h3>
            <p>他和<line-code>pip</line-code>应该是好基友</p>
            <h4>Ubuntu 22.04</h4>
            <pre ddz-class="here-need-to-handle-by-highlight" ddz-lang="bash">
sudo apt install python3-venv
            </pre>
            <h5>虚拟环境</h5>
            <pre ddz-class="here-need-to-handle-by-highlight" ddz-lang="bash">
#   创建
python3 -m venv venv
#   激活
source ./venv/bin/activate
#   退出虚拟环境
deactivate
#   安装依赖（添加到这里，使用的时候方便一些）
pip install -r requirements.txt 

#   你可以创建多个虚拟环境
python3 -m venv venv1
source ./venv1/bin/activate

python3 -m venv venv2
source ./venv2/bin/activate
            </pre>
            <h4>Windows</h4>
            <pre ddz-class="here-need-to-handle-by-highlight" ddz-lang="bash">
#   创建虚拟环境
python -m venv venv
#   激活虚拟环境
.\venv\scripts\activate
#   退出虚拟环境
deactivate
#   安装依赖（添加到这里，使用的时候方便一些）
pip install -r requirements.txt 

#   你可以创建多个虚拟环境
python -m venv venv1
.\venv1\scripts\activate

python -m venv venv2
.\venv2\scripts\activate
            </pre>
            <h3>Poetry</h3>
            <ul>
                <li>
                    <a href="https://python-poetry.org/" target="_blank" rel="noopener noreferrer">Poetry - Python dependency management and packaging made easy</a>
                </li>
                <li>
                    <a href="https://github.com/python-poetry/poetry" target="_blank" rel="noopener noreferrer">GitHub - python-poetry/poetry: Python packaging and dependency management made easy</a>
                </li>
                <li>
                    <a href="https://python-poetry.org/docs/" target="_blank" rel="noopener noreferrer"> Introduction | Documentation | Poetry - Python dependency management and packaging made easy</a>
                </li>
            </ul>
            <details>
                <summary>一些常用的命令</summary>
                <ol>
                    <li>
                        安装依赖
                        <ul>
                            <li>poetry install：安装项目依赖。</li>
                            <li>poetry install -h：查看安装选项。</li>
                        </ul>
                    </li>
                    <li>
                        添加依赖
                        <ul>
                            <li>poetry add &lt;package>：添加一个依赖到你的项目。</li>
                            <li>poetry add &lt;package> --dev：将依赖添加到开发依赖中。</li>
                        </ul>
                    </li>
                    <li>
                        移除依赖
                        <ul>
                            <li>poetry remove &lt;package>：从项目中移除一个依赖。</li>
                        </ul>
                    </li>
                    <li>
                        更新依赖
                        <ul>
                            <li>poetry update：更新所有依赖到最新版本。</li>
                            <li>poetry update &lt;package>：更新指定的依赖。</li>
                        </ul>
                    </li>
                    <li>
                        查看依赖
                        <ul>
                            <li>poetry show：显示项目的所有依赖。</li>
                            <li>poetry show --tree：以树状图形式显示依赖。</li>
                        </ul>
                    </li>
                    <li>
                        构建包
                        <ul>
                            <li>poetry build：构建你的包，可以生成源码包和wheel文件。</li>
                        </ul>
                    </li>
                    <li>
                        发布包
                        <ul>
                            <li>poetry publish：将你的包发布到PyPI。</li>
                        </ul>
                    </li>
                    <li>
                        检查依赖
                        <ul>
                            <li>poetry check：检查依赖是否有任何问题。</li>
                        </ul>
                    </li>
                    <li>
                        配置
                        <ul>
                            <li>poetry config：查看或修改 poetry 的配置。</li>
                        </ul>
                    </li>
                    <li>
                        新项目初始化
                        <ul>
                            <li>poetry new &lt;project-name>：创建一个新的Python项目。</li>
                        </ul>
                    </li>
                    <li>
                        环境管理
                        <ul>
                            <li>poetry env list：列出所有虚拟环境。</li>
                            <li>poetry env use &lt;env>：切换到指定的虚拟环境。</li>
                        </ul>
                    </li>
                    <li>
                        运行脚本
                        <ul>
                            <li>poetry run &lt;command>：在项目环境中运行命令。</li>
                        </ul>
                    </li>
                </ol>
            </details>
            <p>官网介绍他有好几种安装方式：pipx、the official installer……</p>
            <h4>Ubuntu 22.04</h4>
            <p>这里选用的安装方式是：the official installer</p>
            <pre ddz-class="here-need-to-handle-by-highlight" ddz-lang="bash">
curl -sSL https://install.python-poetry.org | python3 -

#   检查版本（安装完成之后立即检查版本是不行的，你还有一步没做）
poetry --version
            </pre>
            <p>
                <img src="./image/poetry-ubuntu-001.png" alt="ubuntu 22.04 安装 poetry ：curl -sSL https://install.python-poetry.org | python3 -" />
            </p>
            <h5>添加到 PATH</h5>
            <p>有点不智能啊，还得自己搞……</p>
            <pre ddz-class="here-need-to-handle-by-highlight" ddz-lang="bash">
#   更新   /home/ddz/.bashrc  文件
export PATH="/home/ddz/.local/bin:$PATH"
            </pre>
            <p>刷新 .bashrc 文件：<line-code>source .bashrc</line-code>，注意文件路径，这里就是在主目录打开的终端</p>
            <p>
                <img src="./image/poetry-ubuntu-002.png" alt="ubuntu 22.04 安装 poetry ：添加到 PATH" />
            </p>
            <h5>设置清华镜像源</h5>
            <p>参考地址：<a href="https://mirrors.tuna.tsinghua.edu.cn/help/pypi/" target="_blank" rel="noopener noreferrer"> pypi | 镜像站使用帮助 | 清华大学开源软件镜像站 | Tsinghua Open Source Mirror</a></p>
            <pre ddz-class="here-need-to-handle-by-highlight" ddz-lang="bash">
poetry source add --priority=primary mirrors https://pypi.tuna.tsinghua.edu.cn/simple/
            </pre>
            <p>
                <img src="./image/poetry-ubuntu-003.png" alt="ubuntu 22.04 安装 poetry ：设置清华镜像源" />
            </p>
            <mark-block>
                <p>开始以为会像<line-code>pip</line-code>一样设置全局镜像，但是根据上面的截图可以看出，<line-code>poetry</line-code>不是，应该是项目级别的</p>
                <p>那么有没有一种方式可以设置全局镜像？？？</p>
            </mark-block>
        </div>
    </body>
</html>
