<!DOCTYPE html>
<html lang="zh-cmn-Hans">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta http-equiv="X-UA-Compatible" content="ie=edge" />
	<title>ffmpeg - xiaodu114.github.io</title>
	<meta name="keywords" content="ffmpeg" />
	<meta name="description" content="ffmpeg" />

	<script src="/p/_/js/main.js"></script>
</head>

<body>
	<!-- githubè®¿é—®åœ°å€ï¼š/p/tool/ffmpeg/index.html -->
	<div class="blog-page">
		<h1>ffmpeg</h1>
		<p>
			<a href="https://ffmpeg.org/" target="_blank">ffmpeg</a>
			è¿™å®¶ä¼™å¤§åé¼é¼å•ŠğŸ‘ğŸ‘ğŸ‘ã€‚å®˜ç½‘ä»‹ç»ï¼šA complete, cross-platform solution to
			record, convert and stream audio and video.
		</p>
		<h2>å®‰è£…</h2>
		<h3>Windowsä¸‹å®‰è£…</h3>
		<p>
			è¿™é‡Œé€‰æ‹©çš„æ˜¯<a href="https://www.gyan.dev/" target="_blank">gyan.dev</a>çš„å‘å¸ƒç‰ˆæœ¬ï¼Œå¦‚ä¸‹å›¾ï¼š
		</p>
		<p>
			<img src="./images/1.png" width="100%" />
		</p>
		<p>
			<img src="./images/2.png" width="100%" />
		</p>
		<marked-block type="info" explain="è¯´æ˜">
			<p>
				å½“æ—¶ä¸‹è½½çš„ç‰ˆæœ¬ä¸ºï¼šffmpeg-4.4-full_build.7zï¼Œç°åœ¨æ˜¯ï¼šffmpeg-4.4.1-full_build.7zã€‚åé¢æ²¡æœ‰è¯´æ˜éƒ½æ˜¯åœ¨ç‰ˆæœ¬4.4çš„åŸºç¡€ä¸Šå¼„çš„ã€‚
			</p>
		</marked-block>
		<p>
			ä¸‹è½½å®Œæˆä¹‹åè§£å‹å³å¯ï¼Œè¿™é‡Œè§£å‹ä½ç½®æ˜¯ï¼š<line-code>D:\Program Files\ffmpeg-4.4-full_build</line-code>
			ã€‚ä¹‹åä½ è¿˜å¯ä»¥æ·»åŠ ç¯å¢ƒå˜é‡ï¼Œæ–¹ä¾¿ä½¿ç”¨ã€‚å°†
			<line-code>D:\Program Files\ffmpeg-4.4-full_build\bin</line-code>æ·»åŠ åˆ°<line-code>Path </line-code>
			ã€‚è¿™å°±ç»“æŸäº†ï¼Œä½ å¯ä»¥æ£€æŸ¥ä¸€ä¸‹ç‰ˆæœ¬ï¼Œå¦‚ä¸‹å›¾ï¼š
		</p>
		<p>
			<img src="./images/3.png" width="100%" />
		</p>
		<h3>Linuxä¸‹å®‰è£…</h3>
		<p>å…ˆå ä¸ªä½ç½®â€¦â€¦</p>
		<h2>å›¾ç‰‡ã€éŸ³é¢‘åˆæˆè§†é¢‘</h2>
		<p>
			æ€ä¹ˆæŠŠè‡ªå·±æ‹çš„nå¤šç…§ç‰‡åˆ©ç”¨èµ·æ¥ï¼Ÿåˆæˆä¸€ä¸ªè§†é¢‘æ€ä¹ˆæ ·ï¼Œåœ¨æ·»åŠ ç‚¹æè¿°ï¼Œåœ¨æ¥ç‚¹éŸ³ä¹â€¦â€¦å¤ªæ£’äº†ğŸ˜„ğŸ˜„ğŸ˜„
		</p>
		<h3>å•å¼ å›¾ç‰‡è½¬è§†é¢‘</h3>
		<p>æˆ‘ä»¬å…ˆæ¥ä¸ªç®€å•çš„ï¼Œå…ˆå¼„ä¸€å¼ å›¾ç‰‡ï¼Œå¾ªåºæ¸è¿›â€¦â€¦</p>
		<h4>æœ€ç®€</h4>
		<pre ddz-class="here-need-to-handle-by-highlight" ddz-lang="bash">
#   æœ€ç®€çš„å‘½ä»¤
ffmpeg -i 1-1.jpg input_one_pic_1.mp4
		</pre>
		<marked-block type="info" explain="è¯´æ˜">
			<p>æœ€ç®€çš„å‘½ä»¤ï¼šè¾“å…¥ä¸€å¼ å›¾ç‰‡ï¼Œè¾“å‡ºä¸€ä¸ªè§†é¢‘ï¼Œè§†é¢‘çš„æ—¶é•¿ä¸º0ã€‚</p>
			<p>
				ä¸Šé¢çš„å‘½ä»¤ï¼ˆæˆ–è€…ä¹‹åçš„å‘½ä»¤ï¼‰éƒ½æ˜¯åœ¨å›¾ç‰‡æ‰€åœ¨çš„æ–‡ä»¶å¤¹æ‰“å¼€çš„å‘½ä»¤è¡Œï¼ˆè¿™é‡Œä½¿ç”¨çš„æ˜¯ï¼šWindows
				PowerShellï¼‰æ‰§è¡Œçš„ã€‚
			</p>
		</marked-block>
		<h4>æ·»åŠ å¾ªç¯è¾“å‡ºã€æ—¶é—´</h4>
		<pre ddz-class="here-need-to-handle-by-highlight" ddz-lang="bash">
#   æ·»åŠ å¾ªç¯è¾“å…¥ã€æ—¶é—´
ffmpeg -loop 1 -t 5 -i 1-1.jpg input_one_pic_2.mp4
		</pre>
		<marked-block type="info" explain="è¯´æ˜">
			<p>è¾“å‡ºè§†é¢‘çš„æ—¶é•¿ä¸º5sã€‚</p>
		</marked-block>
		<h4>æ·»åŠ éŸ³é¢‘è¾“å…¥</h4>
		<pre ddz-class="here-need-to-handle-by-highlight" ddz-lang="bash">
#   æ·»åŠ éŸ³é¢‘è¾“å…¥
ffmpeg -loop 1 -t 5 -i 1-1.jpg -i 1.mp3 input_one_pic_3.mp4
		</pre>
		<marked-block type="info" explain="è¯´æ˜">
			<p>mp3çš„æ—¶é•¿ä¸º4åˆ†26ç§’ï¼Œè¾“å‡ºè§†é¢‘çš„æ—¶é•¿ä¹Ÿæ˜¯ã€‚è¿™å¼ å›¾ç‰‡ä¸€ç›´å­˜åœ¨ã€‚</p>
		</marked-block>
		<pre ddz-class="here-need-to-handle-by-highlight" ddz-lang="bash">
#   åœ¨ä¸Šé¢çš„åŸºç¡€ä¸Šåˆ é™¤å¾ªç¯å’Œæ—¶é—´
ffmpeg -i 1-1.jpg -i 1.mp3 input_one_pic_4.mp4
		</pre>
		<marked-block type="info" explain="è¯´æ˜">
			<p>
				è¾“å‡ºè§†é¢‘çš„æ—¶é•¿å’Œä¸Šé¢ç›¸åŒï¼Œå›¾ç‰‡ä¹Ÿä¸€ç›´å­˜åœ¨ï¼Œä½†æ˜¯æ–‡ä»¶å¤§å°è¦æ¯”ä¸Šä¸€ä¸ªå°ã€‚
			</p>
		</marked-block>
		<h3>å¤šå¼ å›¾ç‰‡è½¬è§†é¢‘-æ–‡ä»¶</h3>
		<p>
			ä¸€å¼ å›¾ç‰‡è½¬è§†é¢‘æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰ï¼ˆå³ä½¿æ˜¯æ·»åŠ äº†éŸ³é¢‘ï¼‰ï¼Œä¸å¥½çœ‹ä¹Ÿå¤ªå•è°ƒäº†ã€‚æœ¬æ¥çš„æƒ³æ³•æ˜¯å…ˆæŒ‰ç…§æ‹¼æ¥çš„æ–¹å¼æ¥å®ç°å¤šå¼ å›¾ç‰‡è½¬è§†é¢‘ï¼Œä½†æ˜¯è¿™ç§å®ç°æ–¹å¼ä¸€è·¯åå·â€¦â€¦å€’æ˜¯åˆ©ç”¨æ–‡ä»¶çš„æ–¹å¼å¾ˆå¿«å°±å®ç°äº†ï¼Œé‚£å°±å…ˆè¯´ä¸€ä¸‹ä»–å§ï¼ä»–æœ‰å¾ˆå¤šä¼˜ç‚¹ï¼šç¼©çŸ­å‘½ä»¤ã€å¿½ç•¥å›¾ç‰‡åˆ†è¾¨ç‡ç­‰ã€‚ä¸‹é¢å°±çœ‹ä¸€ä¸‹è¿™ç§å®ç°æ–¹å¼ï¼š
		</p>
		<h4>æœ€ç®€</h4>
		<pre ddz-class="here-need-to-handle-by-highlight" ddz-lang="bash">
#   æœ€ç®€çš„å‘½ä»¤
ffmpeg -f concat -i index.txt input_file_1.mp4
        </pre>
		<p>index.txtæ–‡ä»¶ä¸­çš„å†…å®¹å¦‚ä¸‹ï¼š</p>
		<pre ddz-class="here-need-to-handle-by-highlight" ddz-lang="bash">
file '1-1.jpg'
duration 5
file '1-2.jpg'
duration 5
file '1-3.jpg'
        </pre>
		<marked-block type="info" explain="è¯´æ˜">
			<p>
				æœ€ç®€çš„å‘½ä»¤ï¼Œå°†è¾“å…¥æ–‡ä»¶ä¹‹é—´çš„æ‹¼æ¥æ”¾åˆ°äº†txtæ–‡ä»¶ä¸­ï¼Œè¿™æ ·ä»¥æ¥æ•´ä½“å‘½ä»¤ç¼©çŸ­äº†å¾ˆå¤šã€‚è¿™é‡Œè¿˜å±è”½ä¸€ä¸ªå›¾ç‰‡åˆ†è¾¨ç‡çš„é—®é¢˜ï¼Œåœ¨ä½¿ç”¨çº¯å‘½ä»¤æ‹¼æ¥æ—¶ï¼Œå¦‚æœå›¾ç‰‡çš„åˆ†è¾¨ç‡ä¸ä¸€è‡´ä¼šæŠ¥é”™ï¼ˆæš‚æ—¶æ²¡æœ‰æ‰¾åˆ°è§£å†³åŠæ³•ï¼‰ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼æ²¡æœ‰è¿™ä¸ªé—®é¢˜ã€‚
			</p>
		</marked-block>
		<h4>æ·»åŠ éŸ³é¢‘è¾“å…¥</h4>
		<pre ddz-class="here-need-to-handle-by-highlight" ddz-lang="bash">
#   éŸ³é¢‘è¾“å…¥
ffmpeg -f concat -i index.txt -i 1.mp3 input_file_2.mp4
        </pre>
		<h4>æ·»åŠ è¿‡æ»¤åŠ¨ç”»</h4>
		<p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæš‚æ—¶æ²¡æœ‰æ‰¾åˆ°æ·»åŠ è¿‡åº¦åŠ¨ç”»çš„æ–¹æ³•â€¦â€¦</p>
		<h3>å¤šå¼ å›¾ç‰‡è½¬è§†é¢‘-æ‹¼æ¥</h3>
		<p>
			ä¸Šé¢ä»‹ç»äº†åˆ©ç”¨txtæ–‡ä»¶å°†å¤šå¼ å›¾ç‰‡è½¬è§†é¢‘ï¼Œè¿™é‡Œä»‹ç»ä¸€ä¸‹æ‹¼æ¥çš„æ–¹å¼ï¼Œè™½ç„¶é“è·¯å¾ˆæ›²æŠ˜ï¼Œä½†æ˜¯ç»“æœè¿˜ä¸é”™â€¦â€¦
		</p>
		<h4 style="text-decoration: line-through">ä¸ç†æƒ³çš„å°è¯•</h4>
		<p>
			å‚è€ƒå•å¼ å›¾ç‰‡è½¬è§†é¢‘çš„æ¨¡å¼ï¼Œå†™å‡ºäº†ä¸‹é¢çš„å‘½ä»¤ï¼Œéƒ½ä¸å¤ªç†æƒ³ï¼Œä¸æ˜¯æƒ³è¦çš„â€¦â€¦
		</p>
		<pre ddz-class="here-need-to-handle-by-highlight" ddz-lang="bash">
#   1ã€è¾“å…¥å¤šå¼ å›¾ç‰‡ =ã€‹è§†é¢‘æ—¶é•¿0sï¼ˆåªæœ‰ç¬¬ä¸€å¼ ç…§ç‰‡ï¼Œå’Œ input_one_pic_1.mp4 çš„æ•ˆæœä¸€æ ·ï¼‰
ffmpeg -i 1-1.jpg -i 1-2.jpg -i 1-3.jpg input_multi_pic_1.mp4

#   2ã€å’Œä¸Šé¢çš„ç»“æœç›¸åŒ
ffmpeg -f image2 -i 1-1.jpg -i 1-2.jpg -i 1-3.jpg input_multi_pic_2.mp4

#   3ã€è§†é¢‘æ—¶é•¿5sï¼Œä½†æ˜¯åªæœ‰ç¬¬ä¸€å¼ å›¾ç‰‡
ffmpeg -loop 1 -t 5 -i 1-1.jpg -loop 1 -t 5 -i 1-2.jpg -loop 1 -t 5 -i 1-3.jpg input_multi_pic_3.mp4

#   4ã€å’Œä¸Šé¢çš„ç»“æœç›¸åŒ
ffmpeg -f image2 -loop 1 -t 5 -i 1-1.jpg -loop 1 -t 5 -i 1-2.jpg -loop 1 -t 5 -i 1-3.jpg input_multi_pic_4.mp4

#   5â€¦â€¦
		</pre>
		<p>
			å¤šå¼ å›¾ç‰‡è½¬è§†é¢‘å°è¯•äº†å¾ˆå¤šï¼Œä¹ŸæŒç»­äº†å¾ˆé•¿æ—¶é—´ï¼Œç”šè‡³ä½¿ç”¨æ–‡ä»¶åç§°é€šé…ç¬¦ã€æ”¾åœ¨ä¸€ä¸ªtxtæ–‡ä»¶ä¸­ã€æ·»åŠ åŠ¨ç”»çš„æƒ…å†µä¸‹éƒ½æå®šäº†ï¼Œä½†æ˜¯åƒä¸Šé¢è¿™ç§æ‹¼æ¥çš„æ–¹å¼ä¹Ÿæ²¡æœ‰æå®šâ€¦â€¦ç›´åˆ°ä»Šå¤©ç»ˆäºæ‰¾åˆ°äº†æ€ä¹ˆå®ç°ï¼Œæ‰å¼€å§‹å†™è¿™ç¯‡æ–‡ç« ã€‚<a
				href="https://superuser.com/questions/1347687/ffmpeg-merge-images-with-video" target="_blank">å‚è€ƒé“¾æ¥</a>
		</p>
		<h4>çœ‹åˆ°äº†å¸Œæœ›</h4>
		<pre ddz-class="here-need-to-handle-by-highlight" ddz-lang="bash">
#   å‚è€ƒå‘½ä»¤ï¼Œæ¥è‡ªï¼šhttps://superuser.com/questions/1347687/ffmpeg-merge-images-with-video

ffmpeg -y \
-loop 1 -framerate 24 -t 10 -i default_start.png \
-i output-first.mp4 \
-loop 1 -framerate 24 -t 10 -i default_end.png \
-f lavfi -t 3 -i anullsrc \
-filter_complex "[0:v] [3:a] [1:v] [1:a] [2:v] [3:a] concat=n=3:v=1:a=1 [v] [a]" \
-c:v libx264 -c:a aac -map "[v]" -map "[a]" output-second.mp4
        </pre>
		<p>å‚ç…§ä¸Šé¢çš„å‘½ä»¤ï¼Œé€æ¬¡ä¿®æ”¹ï¼Œå¾—åˆ°äº†ç²¾ç®€çš„å‘½ä»¤å’Œæƒ³è¦çš„ç»“æœğŸ˜„ğŸ˜„ğŸ˜„</p>
		<pre ddz-class="here-need-to-handle-by-highlight" ddz-lang="bash">
#   æ³¨æ„è¿™é‡Œä½¿ç”¨çš„æ˜¯Windows PowerShellï¼Œä¸åŒçš„å‘½ä»¤è¡Œæ¢è¡Œç¬¦å¯èƒ½ä¸åŒ
#   ä¸‹é¢çš„å‘½ä»¤ï¼Œä¸¤ä¸ª``ä¹‹é—´çš„å†…å®¹éƒ½å˜æˆçº¢è‰²äº†

#   1ã€ç¬¬ä¸€æ¬¡ä¿®æ”¹ï¼Œæœ€è°¨æ…ï¼Œæ”¹åŠ¨æœ€å°
ffmpeg -y `
-loop 1 -framerate 24 -t 3 -i 1-1.jpg `
-loop 1 -framerate 24 -t 3 -i 1-3.jpg `
-loop 1 -framerate 24 -t 3 -i 1-4.jpg `
-f lavfi -t 1 -i anullsrc `
-filter_complex "[0:v] [3:a] [1:v] [3:a] [2:v] [3:a] concat=n=3:v=1:a=1 [v] [a]" `
-c:v libx264 -c:a aac -map "[v]" -map "[a]" input_multi_pic_good_1.mp4

#   2ã€åˆ é™¤ -framerate 24 -c:v libx264 -c:a aac é…ç½®
ffmpeg -y `
-loop 1 -t 3 -i 1-1.jpg `
-loop 1 -t 3 -i 1-3.jpg `
-loop 1 -t 3 -i 1-4.jpg `
-f lavfi -t 1 -i anullsrc `
-filter_complex "[0:v] [3:a] [1:v] [3:a] [2:v] [3:a] concat=n=3:v=1:a=1 [v] [a]" `
-map "[v]" -map "[a]" input_multi_pic_good_2.mp4

#   3ã€åˆ é™¤ -map "[a]" ç›¸å…³ï¼›åˆ é™¤ -f lavfi -t 1 -i anullsrc
ffmpeg -y `
-loop 1 -t 3 -i 1-1.jpg `
-loop 1 -t 3 -i 1-3.jpg `
-loop 1 -t 3 -i 1-4.jpg `
-filter_complex "[0:v] [1:v] [2:v] concat=n=3:v=1 [v]" `
-map "[v]" input_multi_pic_good_3.mp4

#`   4ã€åˆ é™¤ -y
ffmpeg `
-loop 1 -t 3 -i 1-1.jpg `
-loop 1 -t 3 -i 1-3.jpg `
-loop 1 -t 3 -i 1-4.jpg `
-filter_complex "[0:v] [1:v] [2:v] concat=n=3:v=1 [v]" `
-map "[v]" input_multi_pic_good_4.mp4
        </pre>
		<h4 style="text-decoration: line-through">ä¹Œäº‘å†æ¬¡æ¥ä¸´</h4>
		<pre ddz-class="here-need-to-handle-by-highlight" ddz-lang="bash">
#   æ·»åŠ éŸ³é¢‘è¾“å…¥ï¼Œè¯¥å‘½ä»¤æ²¡æœ‰è¾¾åˆ°é¢„æœŸæ•ˆæœï¼Œæ²¡æœ‰éŸ³é¢‘
ffmpeg `
-loop 1 -t 3 -i 1-1.jpg `
-loop 1 -t 3 -i 1-3.jpg `
-loop 1 -t 3 -i 1-4.jpg `
-i 1.mp3 `
-filter_complex "[0:v] [1:v] [2:v] concat=n=3:v=1 [v]" `
-map "[v]" input_multi_pic_good_5.mp4
        </pre>
		<h4>é›¨åå½©è™¹</h4>
		<p>
			æœ¬ä»¥ä¸ºæŒºç®€å•çš„ï¼Œæ·»åŠ ä¹‹åç›´æ¥åºŸäº†ï¼Œç”Ÿæˆæ˜¯ç”Ÿæˆè§†é¢‘äº†ï¼Œä½†æ˜¯æ²¡æœ‰éŸ³é¢‘ã€‚åˆå¼€å§‹æŸ¥äº†â€¦â€¦è¿™æ¬¡å€’æ˜¯æŒºå¹¸è¿ï¼Œå¾ˆå¿«å°±æŸ¥åˆ°äº†ï¼Œ<a
				href="https://shotstack.io/learn/use-ffmpeg-to-convert-images-to-video/" target="_blank">å‚è€ƒé“¾æ¥</a>
		</p>
		<pre ddz-class="here-need-to-handle-by-highlight" ddz-lang="bash">
#   å‚è€ƒå‘½ä»¤ï¼Œæ¥è‡ªï¼šhttps://shotstack.io/learn/use-ffmpeg-to-convert-images-to-video/

ffmpeg \
-loop 1 -t 5 -i happy1.jpg \
-loop 1 -t 5 -i happy2.jpg \
-loop 1 -t 5 -i happy3.jpg \
-loop 1 -t 5 -i happy4.jpg \
-loop 1 -t 5 -i happy5.jpg \
-loop 1 -t 5 -i happy6.jpg \
-i freeflow.mp3 \
-filter_complex \
"[0:v]scale=1280:720:force_original_aspect_ratio=decrease,pad=1280:720:(ow-iw)/2:(oh-ih)/2,setsar=1,fade=t=out:st=4:d=1[v0];
\
[1:v]scale=1280:720:force_original_aspect_ratio=decrease,pad=1280:720:(ow-iw)/2:(oh-ih)/2,setsar=1,fade=t=in:st=0:d=1,fade=t=out:st=4:d=1[v1];
\
[2:v]scale=1280:720:force_original_aspect_ratio=decrease,pad=1280:720:(ow-iw)/2:(oh-ih)/2,setsar=1,fade=t=in:st=0:d=1,fade=t=out:st=4:d=1[v2];
\
[3:v]scale=1280:720:force_original_aspect_ratio=decrease,pad=1280:720:(ow-iw)/2:(oh-ih)/2,setsar=1,fade=t=in:st=0:d=1,fade=t=out:st=4:d=1[v3];
\
[4:v]scale=1280:720:force_original_aspect_ratio=decrease,pad=1280:720:(ow-iw)/2:(oh-ih)/2,setsar=1,fade=t=in:st=0:d=1,fade=t=out:st=4:d=1[v4];
\
[5:v]scale=1280:720:force_original_aspect_ratio=decrease,pad=1280:720:(ow-iw)/2:(oh-ih)/2,setsar=1,fade=t=in:st=0:d=1,fade=t=out:st=4:d=1[v5];
\
[v0][v1][v2][v3][v4][v5]concat=n=6:v=1:a=0,format=yuv420p[v]" -map "[v]" -map 6:a -shortest output7.mp4
        </pre>
		<p>å‚ç…§ä¸Šé¢çš„å‘½ä»¤ä»¥åŠå¤šå¼ å›¾ç‰‡è½¬è§†é¢‘æ—¶çš„æˆåŠŸç»éªŒï¼Œå¾ˆå¿«å°±æˆåŠŸäº†ã€‚</p>
		<pre ddz-class="here-need-to-handle-by-highlight" ddz-lang="bash">
#   è¯¥å‘½ä»¤è¾¾åˆ°äº†é¢„æœŸæ•ˆæœï¼Œè§†é¢‘æ—¶é•¿å’ŒéŸ³é¢‘æ—¶é•¿ç›¸åŒï¼Œåªæ˜¯å›¾ç‰‡çš„ç´¯è®¡å¾ªç¯æ—¶é•¿å°äºéŸ³é¢‘æ—¶é•¿ï¼Œæ‰€ä»¥æœ€åç”»é¢åœç•™åœ¨äº†æœ€åä¸€å¼ å›¾ç‰‡
ffmpeg `
-loop 1 -t 3 -i 1-1.jpg `
-loop 1 -t 3 -i 1-3.jpg `
-loop 1 -t 3 -i 1-4.jpg `
-i 1.mp3 `
-filter_complex "[0:v] [1:v] [2:v] concat=n=3:v=1:a=0 [v]" `
-map "[v]" -map 3:a input_multi_pic_good_6.mp4
        </pre>
		<h4>æ·»åŠ è¿‡æ»¤åŠ¨ç”»</h4>
		<p>
			è‡³æ­¤å¤šå¼ å›¾ç‰‡è½¬è§†é¢‘åŸºæœ¬ä¸Šç®—æ˜¯å®Œæˆäº†ï¼Œä½†æ˜¯æ­¤æ—¶ä½ ä¼šçœ‹åˆ°è§†é¢‘ä¸­å›¾ç‰‡ä¸å›¾ç‰‡ä¹‹é—´çš„åˆ‡æ¢ä¸æ˜¯å¾ˆå¥½ï¼Œè¦æ˜¯èƒ½æ·»åŠ ç‚¹åŠ¨ç”»å°±å®Œç¾äº†â€¦â€¦<a href="https://trac.ffmpeg.org/wiki/Xfade"
				target="_blank">ç‚¹å‡»æŸ¥çœ‹æ”¯æŒçš„åŠ¨ç”»</a>
		</p>
		<pre ddz-class="here-need-to-handle-by-highlight" ddz-lang="bash">
#   å‚ç…§ä¸Šé¢ä¾‹å­çš„ç¬¬ä¸€ä¸ªå®ç°ï¼ˆéœ€è¦æ³¨æ„durationå’Œoffsetï¼Œä»¥åŠæœ€åç”Ÿæˆè§†é¢‘çš„æ—¶é•¿ï¼‰
ffmpeg `
-loop 1 -t 5 -i 1-1.jpg `
-loop 1 -t 5 -i 1-3.jpg `
-filter_complex "[0][1]xfade=transition=wiperight:duration=3:offset=2,format=yuv420p" `
input_multi_pic_animation_1.mp4
        </pre>
		<marked-block type="info" explain="è¯´æ˜">
			<p>
				æ¯å¼ å›¾ç‰‡çš„å¾ªç¯æ—¶é—´æ˜¯5sï¼Œå¦‚æœä¸æ·»åŠ è¿‡æ»¤åŠ¨ç”»ï¼Œé‚£ä¹ˆè§†é¢‘çš„æ—¶é•¿æ˜¯10sã€‚è¿™é‡Œä½¿ç”¨äº†è¿‡åº¦åŠ¨ç”»ï¼Œæœ€åç”Ÿæˆçš„è§†é¢‘æ—¶é•¿æ˜¯7sã€‚é‚£è¿™7sæ˜¯å¦‚ä½•å¾—å‡ºçš„ï¼Œä¸ºäº†è¾¾åˆ°æˆ‘ä»¬æƒ³è¦çš„è§†é¢‘æ•ˆæœï¼Œå›¾ç‰‡çš„å¾ªç¯æ—¶é—´ã€åŠ¨ç”»çš„durationå’Œoffset
				â€¦â€¦ä¸‹é¢å†çœ‹å‡ ä¸ªä¾‹å­ï¼Œå¸Œæœ›å¯ä»¥å¾—åˆ°ç­”æ¡ˆã€‚
			</p>
		</marked-block>
		<pre ddz-class="here-need-to-handle-by-highlight" ddz-lang="bash">
#   ä½¿ç”¨è¿™ä¸ªå‘½ä»¤ç”Ÿæˆçš„è§†é¢‘æ—¶é•¿ä¸º10sã€‚
ffmpeg `
-loop 1 -t 5 -i 1-1.jpg `
-loop 1 -t 8 -i 1-3.jpg `
-filter_complex "[0][1]xfade=transition=wiperight:duration=3:offset=2,format=yuv420p" `
input_multi_pic_animation_2.mp4

#   ä½¿ç”¨è¿™ä¸ªå‘½ä»¤ç”Ÿæˆçš„è§†é¢‘æ—¶é•¿ä¸º12sã€‚
ffmpeg `
-loop 1 -t 5 -i 1-1.jpg `
-loop 1 -t 8 -i 1-3.jpg `
-loop 1 -t 5 -i 1-4.jpg `
-filter_complex "
[0][1]xfade=transition=wipeleft:duration=3:offset=2[f1];
[f1][2]xfade=transition=wiperight:duration=3:offset=7
,format=yuv420p[v]
" -map "[v]" input_multi_pic_animation_3.mp4

#   ä½¿ç”¨è¿™ä¸ªå‘½ä»¤ç”Ÿæˆçš„è§†é¢‘æ—¶é•¿ä¸º17sã€‚
ffmpeg `
-loop 1 -t 5 -i 1-1.jpg `
-loop 1 -t 8 -i 1-3.jpg `
-loop 1 -t 8 -i 1-4.jpg `
-loop 1 -t 5 -i 1-5.jpg `
-filter_complex "
[0][1]xfade=transition=wipeleft:duration=3:offset=2[f1];
[f1][2]xfade=transition=wiperight:duration=3:offset=7[f2];
[f2][3]xfade=transition=wipeup:duration=3:offset=12
,format=yuv420p[v]
" -map "[v]" input_multi_pic_animation_4.mp4

#   ä½¿ç”¨è¿™ä¸ªå‘½ä»¤ç”Ÿæˆçš„è§†é¢‘æ—¶é•¿ä¸º17sã€‚ï¼ˆåœ¨ä¸Šé¢çš„åŸºç¡€ä¸Šæ·»åŠ éŸ³é¢‘ï¼‰
ffmpeg `
-loop 1 -t 5 -i 1-1.jpg `
-loop 1 -t 8 -i 1-3.jpg `
-loop 1 -t 8 -i 1-4.jpg `
-loop 1 -t 5 -i 1-5.jpg `
-i 1.mp3 `
-filter_complex "
[0][1]xfade=transition=wipeleft:duration=3:offset=2[f1];
[f1][2]xfade=transition=wiperight:duration=3:offset=7[f2];
[f2][3]xfade=transition=wipeup:duration=3:offset=12
,format=yuv420p[v]
" -map "[v]" -map 4:a input_multi_pic_animation_5.mp4
        </pre>
		<marked-block type="info" explain="è¯´æ˜">
			<p>
				å¼„äº†å‡ ä¸ªä¾‹å­ï¼Œä¹Ÿå¤§æ¦‚å‘ç°äº†ä¸€äº›è§„å¾‹ã€‚ä¸‹é¢æ˜¯æˆ‘çš„ç†è§£ï¼šåŠ¨ç”»æŒç»­æ—¶é—´ï¼ˆdurationï¼‰æ˜¯ä¸¤å¼ å›¾ç‰‡å…±åŒå æœ‰ï¼Œç›¸äº¤çš„æ—¶é—´ï¼Œä¹Ÿå¯ä»¥ç†è§£æˆåä¸€å¼ å›¾ç‰‡æå‰durationçš„æ—¶é—´ï¼›åç§»ï¼ˆoffsetï¼‰æ˜¯ä»å“ªä¸€ä¸ªæ—¶é—´ç‚¹å¼€å§‹ã€‚ä¸çŸ¥é“ç†è§£å¯¹ä¸å¯¹ğŸ˜“ğŸ˜“ğŸ˜“ï¼Œè¿™å‡ ä¸ªçœ‹ç€æ²¡æœ‰é—®é¢˜ã€‚è§†é¢‘æ—¶é•¿=(loop<sub>1</sub>+loop<sub>2</sub>+â€¦â€¦+loop<sub>n</sub>)-(duration<sub>1</sub>+duration<sub>2</sub>+â€¦â€¦+duration<sub>n-1</sub>)ã€‚
			</p>
		</marked-block>
		<h4>åˆ†è¾¨ç‡ä¸ä¸€è‡´çš„é—®é¢˜</h4>
		<p>
			é‡‡ç”¨æ‹¼æ¥çš„æ–¹å¼ï¼Œå¦‚æœæ¶‰åŠåˆ°çš„å›¾ç‰‡çš„åˆ†è¾¨ç‡ä¸ä¸€è‡´å°±ä¼šæŠ¥é”™ã€‚ä¹‹åå°±æ˜¯ä¸€é¡¿æŸ¥è¯¢â€¦â€¦<a href="https://trac.ffmpeg.org/wiki/Scaling"
				target="_blank">å‚è€ƒé“¾æ¥1</a><a
				href="https://stackoverflow.com/questions/65003017/crossfade-animation-with-multiple-images-using-ffmpeg"
				target="_blank">å‚è€ƒé“¾æ¥2</a>
		</p>
		<p>å…ˆçœ‹ä¸€ä¸‹å‚è€ƒå‘½ä»¤ï¼š</p>
		<pre ddz-class="here-need-to-handle-by-highlight" ddz-lang="bash">
#   å‚ç…§å‘½ä»¤-ã€‹åˆ†è¾¨ç‡çš„é—®é¢˜
ffmpeg \
-loop 1 -t 5 -i 1.png \
-loop 1 -t 5 -i 2.png \
-loop 1 -t 5 -i 3.png \
-loop 1 -t 5 -i 4.png \
-loop 1 -t 5 -i 5.png \-filter_complex "
[0]scale=-2:720,pad=1280:720:(ow-iw)/2:(oh-ih)/2,setsar=1,fade=d=1:t=in:alpha=1,fade=t=out:st=4:d=1,setpts=PTS-STARTPTS+4/TB[f0];
[1]scale=-2:720,pad=1280:720:(ow-iw)/2:(oh-ih)/2,setsar=1,fade=d=1:t=in:alpha=1,fade=t=out:st=4:d=1,setpts=PTS-STARTPTS+8/TB[f1];
[2]scale=-2:720,pad=1280:720:(ow-iw)/2:(oh-ih)/2,setsar=1,fade=d=1:t=in:alpha=1,fade=t=out:st=4:d=1,setpts=PTS-STARTPTS+12/TB[f2];
[3]scale=-2:720,pad=1280:720:(ow-iw)/2:(oh-ih)/2,setsar=1,fade=d=1:t=in:alpha=1,fade=t=out:st=4:d=1,setpts=PTS-STARTPTS+16/TB[f3];
[4]scale=-2:720,pad=1280:720:(ow-iw)/2:(oh-ih)/2,setsar=1,fade=d=1:t=in:alpha=1,fade=t=out:st=4:d=1,setpts=PTS-STARTPTS+20/TB[f4];
[f0][f1]overlay[bg1];
[bg1][f2]overlay[bg2];
[bg2][f3]overlay[bg3];
[bg3][f4]overlay,format=yuv420p[v]
" -map [v] -movflags +faststart -y out.mp4
		</pre>
		<p>å†çœ‹ä¸€ä¸‹å‚è€ƒå®ç°</p>
		<pre ddz-class="here-need-to-handle-by-highlight" ddz-lang="bash">
#   å®ç°1
ffmpeg `
-loop 1 -t 5 -i 1-1.jpg `
-loop 1 -t 5 -i 1-2.jpg `
-loop 1 -t 5 -i 1-3.jpg `
-loop 1 -t 5 -i 1-4.jpg `
-filter_complex "`
[0]scale=-2:720,pad=1280:720:(ow-iw)/2:(oh-ih)/2,setsar=1,fade=d=1:t=in:alpha=1,fade=t=out:st=4:d=1,setpts=PTS-STARTPTS+4/TB[f0];
[1]scale=-2:720,pad=1280:720:(ow-iw)/2:(oh-ih)/2,setsar=1,fade=d=1:t=in:alpha=1,fade=t=out:st=4:d=1,setpts=PTS-STARTPTS+8/TB[f1];
[2]scale=-2:720,pad=1280:720:(ow-iw)/2:(oh-ih)/2,setsar=1,fade=d=1:t=in:alpha=1,fade=t=out:st=4:d=1,setpts=PTS-STARTPTS+12/TB[f2];
[3]scale=-2:720,pad=1280:720:(ow-iw)/2:(oh-ih)/2,setsar=1,fade=d=1:t=in:alpha=1,fade=t=out:st=4:d=1,setpts=PTS-STARTPTS+16/TB[f3];
[f0][f1]overlay[bg1];
[bg1][f2]overlay[bg2];
[bg2][f3]overlay,
format=yuv420p[v]
" -map [v] -movflags +faststart -y input_multi_pic_ratio_1.mp4

#   å®ç°2
ffmpeg `
-loop 1 -t 5 -i 1-1.jpg `
-loop 1 -t 5 -i 1-2.jpg `
-loop 1 -t 5 -i 1-3.jpg `
-loop 1 -t 5 -i 1-4.jpg `
-filter_complex "`
[0]scale='min(3840,iw)':min'(2592,ih)',setpts=PTS-STARTPTS+0/TB[f0];
[1]scale='min(3840,iw)':min'(2592,ih)',setpts=PTS-STARTPTS+5/TB[f1];
[2]scale='min(3840,iw)':min'(2592,ih)',setpts=PTS-STARTPTS+10/TB[f2];
[3]scale='min(3840,iw)':min'(2592,ih)',setpts=PTS-STARTPTS+15/TB[f3];
[f0][f1]overlay[bg1];
[bg1][f2]overlay[bg2];
[bg2][f3]overlay,
format=yuv420p[v]
" -map [v] input_multi_pic_ratio_2.mp4

#   å®ç°3ï¼šæ·»åŠ åŠ¨ç”»
ffmpeg `
-loop 1 -t 5 -i 1-1.jpg `
-loop 1 -t 8 -i 1-2.jpg `
-loop 1 -t 8 -i 1-3.jpg `
-loop 1 -t 8 -i 1-4.jpg `
-loop 1 -t 5 -i 1-5.jpg `
-filter_complex "`
[0:v]scale='min(3840,iw)':min'(2592,ih)'[img0];
[1:v]scale='min(3840,iw)':min'(2592,ih)'[img1];
[2:v]scale='min(3840,iw)':min'(2592,ih)'[img2];
[3:v]scale='min(3840,iw)':min'(2592,ih)'[img3];
[4:v]scale='min(3840,iw)':min'(2592,ih)'[img4];
[img0][img1]xfade=transition=wipeup:duration=3:offset=2[f1];
[f1][img2]xfade=transition=wiperight:duration=3:offset=7[f2];
[f2][img3]xfade=transition=wipedown:duration=3:offset=12[f3];
[f3][img4]xfade=transition=wipeleft:duration=3:offset=17
,format=yuv420p[v]
" -map "[v]" input_multi_pic_ratio_3.mp4

#   å®ç°4ï¼šå¤„ç†åˆ†è¾¨ç‡ã€æ·»åŠ åŠ¨ç”»ã€æ·»åŠ éŸ³é¢‘
ffmpeg `
-loop 1 -t 5 -i 1-1.jpg `
-loop 1 -t 8 -i 1-2.jpg `
-loop 1 -t 8 -i 1-3.jpg `
-loop 1 -t 8 -i 1-4.jpg `
-loop 1 -t 5 -i 1-5.jpg `
-i 1.mp3 `
-filter_complex "`
[0:v]scale='min(3840,iw)':min'(2592,ih)'[img0];
[1:v]scale='min(3840,iw)':min'(2592,ih)'[img1];
[2:v]scale='min(3840,iw)':min'(2592,ih)'[img2];
[3:v]scale='min(3840,iw)':min'(2592,ih)'[img3];
[4:v]scale='min(3840,iw)':min'(2592,ih)'[img4];
[img0][img1]xfade=transition=wipeup:duration=3:offset=2[f1];
[f1][img2]xfade=transition=wiperight:duration=3:offset=7[f2];
[f2][img3]xfade=transition=wipedown:duration=3:offset=12[f3];
[f3][img4]xfade=transition=wipeleft:duration=3:offset=17
,format=yuv420p[v]
" -map "[v]" -map 5:a input_multi_pic_ratio_4.mp4
		</pre>
		<h2>m3u8è½¬è§†é¢‘</h2>
		<p>m3u8è¿™ä¸ªä¸œä¸œæŒºè®©äººï¼ˆå–œæ¬¢ä¸‹è½½çš„ï¼‰éƒé—·çš„ï¼Œä¹Ÿä¸æ˜¯æ²¡æœ‰åŠæ³•ä¸‹è½½ï¼Œåªæ˜¯æœ‰ç‚¹éº»çƒ¦â€¦â€¦è¿™é‡Œä»‹ç»ä¸€ç§æ–¹å¼ï¼šåˆ©ç”¨ffmpegã€‚æœ¬æ¥çš„æƒ³æ³•æ˜¯å…ˆä¸‹è½½m3u8æ–‡ä»¶ï¼Œä¹‹åè§£ææ–‡ä»¶å¹¶è·å–æ‰€æœ‰çš„tsæ–‡ä»¶åœ°å€å¹¶ä¸‹è½½ï¼Œæœ€ååˆå¹¶è¿™äº›tsæ–‡ä»¶
			ã€‚æ²¡æƒ³åˆ°å•Šï¼ffmpegç›´æ¥æ”¯æŒè¾“å…¥m3u8æ–‡ä»¶ï¼Œå®Œç¾ã€‚</p>
		<p>è¿™é‡Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ä¸€ä¸‹ï¼Œä½ çš„m3u8æ–‡ä»¶æ—¢å¯ä»¥æ˜¯è¿œç¨‹æ–‡ä»¶ï¼ˆä¾‹å¦‚ï¼šhttps://www.xxx.com/1.m3u8ï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯æœ¬åœ°æ–‡ä»¶ã€‚è¿œç¨‹æ–‡ä»¶å’±å°±ä¸è¯´äº†ã€‚å¦‚æœæ˜¯æœ¬åœ°æ–‡ä»¶ï¼Œéœ€è¦æ³¨æ„æ–‡ä»¶ä¸­çš„åœ°å€å¯èƒ½æ˜¯ç›¸å¯¹åœ°å€ï¼Œè¿™æ—¶ä½ éœ€è¦æ‰‹åŠ¨è¡¥å……ä¸€ä¸‹ã€‚
		</p>
		<pre ddz-class="here-need-to-handle-by-highlight" ddz-lang="bash">
#   è¿œç¨‹æ–‡ä»¶
ffmpeg -protocol_whitelist file,http,https,tcp,tls,crypto -i https://www.xxx.com/1.m3u8 output.mp4
#   æœ¬åœ°æ–‡ä»¶
ffmpeg -protocol_whitelist file,http,https,tcp,tls,crypto -i index.m3u8 output.mp4
		</pre>
		<p>å…¶ä»–åšæ³•ï¼š<a href="https://www.leawo.org/entips/use-ffmpeg-to-download-m3u8-file-1395.html" target="_blank">How to
				Use FFmpeg to Download M3U8 File? | Leawo Tutorial Center</a></p>
	</div>
</body>

</html>